@import "tailwindcss";
@import "tw-animate-css";

@custom-variant dark (&:is(.dark *));

/* Atlassian Design Tokens - Light Theme */
html[data-color-mode='light'] {
  color-scheme: light;
  --ds-text: #292a2e;
  --ds-text-disabled: #080f214a;
  --ds-text-inverse: #ffffff;
  --ds-text-selected: #1868db;
  --ds-text-brand: #1868db;
  --ds-text-danger: #ae2e24;
  --ds-text-warning: #9e4c00;
  --ds-text-warning-inverse: #292a2e;
  --ds-text-success: #4c6b1f;
  --ds-text-discovery: #803fa5;
  --ds-text-information: #1558bc;
  --ds-text-subtlest: #6b6e76;
  --ds-text-subtle: #505258;
  --ds-link: #1868db;
  --ds-link-pressed: #1558bc;
  --ds-border: #0b120e24;
  --ds-border-disabled: #0515240f;
  --ds-border-focused: #4688ec;
  --ds-border-input: #8c8f97;
  --ds-border-inverse: #ffffff;
  --ds-border-selected: #1868db;
  --ds-border-brand: #1868db;
  --ds-border-danger: #e2483d;
  --ds-border-warning: #e06c00;
  --ds-border-success: #6a9a23;
  --ds-border-bold: #7d818a;
  --ds-background-disabled: #17171708;
  --ds-background-input: #ffffff;
  --ds-background-input-hovered: #f8f8f8;
  --ds-background-input-pressed: #ffffff;
  --ds-background-neutral: #0515240f;
  --ds-background-neutral-hovered: #0b120e24;
  --ds-background-neutral-pressed: #080f214a;
  --ds-background-neutral-subtle: #00000000;
  --ds-background-neutral-subtle-hovered: #0515240f;
  --ds-background-neutral-subtle-pressed: #0b120e24;
  --ds-background-neutral-bold: #292a2e;
  --ds-background-neutral-bold-hovered: #3b3d42;
  --ds-background-selected: #e9f2fe;
  --ds-background-selected-hovered: #cfe1fd;
  --ds-background-brand-bold: #1868db;
  --ds-background-brand-bold-hovered: #1558bc;
  --ds-background-brand-bold-pressed: #144794;
  --ds-background-danger: #ffeceb;
  --ds-background-danger-hovered: #ffd5d2;
  --ds-background-danger-bold: #c9372c;
  --ds-background-danger-bold-hovered: #ae2e24;
  --ds-background-warning: #fff5db;
  --ds-background-warning-hovered: #fce4a6;
  --ds-background-warning-bold: #fbc828;
  --ds-background-success: #efffd6;
  --ds-background-success-hovered: #d3f1a7;
  --ds-background-success-bold: #5b7f24;
  --ds-background-success-bold-hovered: #4c6b1f;
  --ds-background-discovery: #f8eefe;
  --ds-background-discovery-bold: #964ac0;
  --ds-background-information: #e9f2fe;
  --ds-background-information-hovered: #cfe1fd;
  --ds-background-information-bold: #1868db;
  --ds-background-information-bold-hovered: #1558bc;
  --ds-surface: #ffffff;
  --ds-surface-hovered: #f0f1f2;
  --ds-surface-pressed: #dddee1;
  --ds-surface-overlay: #ffffff;
  --ds-surface-raised: #ffffff;
  --ds-surface-raised-hovered: #f0f1f2;
  --ds-surface-sunken: #f8f8f8;
  --ds-blanket: #050c1f75;
}

/* Atlassian Design Tokens - Dark Theme */
html[data-color-mode='dark'] {
  color-scheme: dark;
  --ds-text: #dee4ea;
  --ds-text-disabled: #bdc5cd47;
  --ds-text-inverse: #161a1d;
  --ds-text-selected: #82b4ff;
  --ds-text-brand: #82b4ff;
  --ds-text-danger: #ff9c8f;
  --ds-text-warning: #fbc828;
  --ds-text-warning-inverse: #161a1d;
  --ds-text-success: #d3f1a7;
  --ds-text-discovery: #dec8fc;
  --ds-text-information: #82b4ff;
  --ds-text-subtlest: #8c9bab;
  --ds-text-subtle: #9fadbc;
  --ds-link: #82b4ff;
  --ds-link-pressed: #4688ec;
  --ds-border: #a6c5e229;
  --ds-border-disabled: #8696a714;
  --ds-border-focused: #4688ec;
  --ds-border-input: #738496;
  --ds-border-inverse: #161a1d;
  --ds-border-selected: #82b4ff;
  --ds-border-brand: #82b4ff;
  --ds-border-danger: #f87168;
  --ds-border-warning: #fbc828;
  --ds-border-success: #b3df72;
  --ds-border-bold: #738496;
  --ds-background-disabled: #8696a714;
  --ds-background-input: #22272b;
  --ds-background-input-hovered: #282e33;
  --ds-background-input-pressed: #22272b;
  --ds-background-neutral: #a1bdd914;
  --ds-background-neutral-hovered: #a6c5e229;
  --ds-background-neutral-pressed: #bdc5cd47;
  --ds-background-neutral-subtle: #00000000;
  --ds-background-neutral-subtle-hovered: #a1bdd914;
  --ds-background-neutral-subtle-pressed: #a6c5e229;
  --ds-background-neutral-bold: #9fadbc;
  --ds-background-neutral-bold-hovered: #b8c4cf;
  --ds-background-selected: #1c2b42;
  --ds-background-selected-hovered: #123263;
  --ds-background-brand-bold: #4688ec;
  --ds-background-brand-bold-hovered: #357de8;
  --ds-background-brand-bold-pressed: #1868db;
  --ds-background-danger: #5d1f1a;
  --ds-background-danger-hovered: #872821;
  --ds-background-danger-bold: #f15b50;
  --ds-background-danger-bold-hovered: #f87168;
  --ds-background-warning: #3d2e00;
  --ds-background-warning-hovered: #533f04;
  --ds-background-warning-bold: #e2b203;
  --ds-background-success: #37471f;
  --ds-background-success-hovered: #3f5224;
  --ds-background-success-bold: #94c748;
  --ds-background-success-bold-hovered: #b3df72;
  --ds-background-discovery: #48245d;
  --ds-background-discovery-bold: #c97cf4;
  --ds-background-information: #1c2b42;
  --ds-background-information-hovered: #123263;
  --ds-background-information-bold: #4688ec;
  --ds-background-information-bold-hovered: #357de8;
  --ds-surface: #1d2125;
  --ds-surface-hovered: #282e33;
  --ds-surface-pressed: #2c333a;
  --ds-surface-overlay: #282e33;
  --ds-surface-raised: #22272b;
  --ds-surface-raised-hovered: #282e33;
  --ds-surface-sunken: #161a1d;
  --ds-blanket: #03040480;
}

/* shadcn-svelte variables mapped to Atlassian tokens */
:root {
  --radius: 0.5rem;
  --background: var(--ds-surface);
  --foreground: var(--ds-text);
  --card: var(--ds-surface-raised);
  --card-foreground: var(--ds-text);
  --popover: var(--ds-surface-overlay);
  --popover-foreground: var(--ds-text);
  --primary: var(--ds-background-brand-bold);
  --primary-foreground: var(--ds-text-inverse);
  --secondary: var(--ds-background-neutral);
  --secondary-foreground: var(--ds-text);
  --muted: var(--ds-surface-sunken);
  --muted-foreground: var(--ds-text-subtle);
  --accent: var(--ds-background-selected);
  --accent-foreground: var(--ds-text-brand);
  --destructive: var(--ds-background-danger-bold);
  --border: var(--ds-border);
  --input: var(--ds-border-input);
  --ring: var(--ds-border-focused);
  --chart-1: var(--ds-background-brand-bold);
  --chart-2: var(--ds-background-success-bold);
  --chart-3: var(--ds-background-warning-bold);
  --chart-4: var(--ds-background-danger-bold);
  --chart-5: var(--ds-background-discovery-bold);
  --sidebar: var(--ds-surface-raised);
  --sidebar-foreground: var(--ds-text);
  --sidebar-primary: var(--ds-background-brand-bold);
  --sidebar-primary-foreground: var(--ds-text-inverse);
  --sidebar-accent: var(--ds-background-selected);
  --sidebar-accent-foreground: var(--ds-text-brand);
  --sidebar-border: var(--ds-border);
  --sidebar-ring: var(--ds-border-focused);
}

/* shadcn Tailwind theme mapping */
@theme inline {
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-card: var(--card);
  --color-card-foreground: var(--card-foreground);
  --color-popover: var(--popover);
  --color-popover-foreground: var(--popover-foreground);
  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);
  --color-secondary: var(--secondary);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);
  --color-accent: var(--accent);
  --color-accent-foreground: var(--accent-foreground);
  --color-destructive: var(--destructive);
  --color-border: var(--border);
  --color-input: var(--input);
  --color-ring: var(--ring);
  --color-chart-1: var(--chart-1);
  --color-chart-2: var(--chart-2);
  --color-chart-3: var(--chart-3);
  --color-chart-4: var(--chart-4);
  --color-chart-5: var(--chart-5);
  --color-sidebar: var(--sidebar);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-ring: var(--sidebar-ring);

  /* Legacy Atlassian color mappings for existing components */
  --color-surface: var(--ds-surface);
  --color-surface-raised: var(--ds-surface-raised);
  --color-surface-sunken: var(--ds-surface-sunken);
  --color-surface-overlay: var(--ds-surface-overlay);
  --color-surface-hovered: var(--ds-surface-hovered);
  --color-text: var(--ds-text);
  --color-text-subtle: var(--ds-text-subtle);
  --color-text-subtlest: var(--ds-text-subtlest);
  --color-text-inverse: var(--ds-text-inverse);
  --color-text-brand: var(--ds-text-brand);
  --color-text-danger: var(--ds-text-danger);
  --color-text-warning: var(--ds-text-warning);
  --color-text-success: var(--ds-text-success);
  --color-border-bold: var(--ds-border-bold);
  --color-border-focused: var(--ds-border-focused);
  --color-border-brand: var(--ds-border-brand);
  --color-border-danger: var(--ds-border-danger);
  --color-brand: var(--ds-background-brand-bold);
  --color-brand-hovered: var(--ds-background-brand-bold-hovered);
  --color-brand-pressed: var(--ds-background-brand-bold-pressed);
  --color-brand-subtlest: var(--ds-background-selected);
  --color-success: var(--ds-background-success-bold);
  --color-success-hovered: var(--ds-background-success-bold-hovered);
  --color-warning: var(--ds-background-warning-bold);
  --color-danger: var(--ds-background-danger-bold);
  --color-danger-hovered: var(--ds-background-danger-bold-hovered);
  --color-danger-subtlest: var(--ds-background-danger);
  --color-discovery: var(--ds-background-discovery-bold);
  --color-information: var(--ds-background-information-bold);
  --color-neutral: var(--ds-background-neutral);
  --color-neutral-hovered: var(--ds-background-neutral-hovered);
  --color-progress-track: var(--ds-background-neutral-pressed);
  --color-brand-bold: var(--ds-background-brand-bold);
  --color-input-bg: var(--ds-background-input);
  --color-input-hovered: var(--ds-background-input-hovered);
  --color-input-pressed: var(--ds-background-input-pressed);

  /* JIRA Issue-Type colors */
  --color-epic: #904ee2;
  --color-story: #63ba3c;
  --color-task: #4bade8;
  --color-bug: #e5493a;
  --color-subtask: #4bade8;

  /* Spacing */
  --spacing-tree-indent: 24px;
}

@layer base {
  * {
    @apply border-border outline-ring/50;
  }
  body {
    @apply bg-background text-foreground;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    margin: 0;
    transition: background-color 0.2s, color 0.2s;
  }
}

#app {
  min-height: 100vh;
}

/* Scrollbar styling */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: var(--ds-surface-sunken);
}

::-webkit-scrollbar-thumb {
  background: var(--ds-border-bold);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--ds-text-subtlest);
}

/* Toast animation */
@keyframes slide-up {
  from {
    transform: translateY(100%);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

.animate-slide-up {
  animation: slide-up 0.3s ease-out;
}

/* App loader fade animation */
@keyframes fade-in {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

.animate-fade-in {
  animation: fade-in 0.3s ease-out;
}

/* Focus ring using Atlassian tokens */
.focus-ring:focus {
  outline: 2px solid var(--ds-border-focused);
  outline-offset: 2px;
}

/* Keyboard shortcut key styling */
.kbd {
  display: inline-block;
  padding: 2px 6px;
  font-size: 11px;
  font-family: ui-monospace, SFMono-Regular, 'SF Mono', Menlo, Consolas, monospace;
  line-height: 1.4;
  color: var(--ds-text);
  background: var(--ds-surface-sunken);
  border: 1px solid var(--ds-border);
  border-radius: 4px;
  box-shadow: 0 1px 0 var(--ds-border);
  min-width: 18px;
  text-align: center;
}
