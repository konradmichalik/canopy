import{i as t,t as u,R as c}from"./core-DVXOVh46.js";var n;(function(r){r.WINDOW_RESIZED="tauri://resize",r.WINDOW_MOVED="tauri://move",r.WINDOW_CLOSE_REQUESTED="tauri://close-requested",r.WINDOW_DESTROYED="tauri://destroyed",r.WINDOW_FOCUS="tauri://focus",r.WINDOW_BLUR="tauri://blur",r.WINDOW_SCALE_FACTOR_CHANGED="tauri://scale-change",r.WINDOW_THEME_CHANGED="tauri://theme-changed",r.WINDOW_CREATED="tauri://window-created",r.WEBVIEW_CREATED="tauri://webview-created",r.DRAG_ENTER="tauri://drag-enter",r.DRAG_OVER="tauri://drag-over",r.DRAG_DROP="tauri://drag-drop",r.DRAG_LEAVE="tauri://drag-leave"})(n||(n={}));async function y(r,a){window.__TAURI_EVENT_PLUGIN_INTERNALS__.unregisterListener(r,a),await t("plugin:event|unlisten",{event:r,eventId:a})}async function d(r,a,i){var e;const o=(e=void 0)!==null&&e!==void 0?e:{kind:"Any"};return t("plugin:event|listen",{event:r,target:o,handler:u(a)}).then(l=>async()=>y(r,l))}async function p(r,a){return await s.load(r,a)}class s extends c{constructor(a){super(a)}static async load(a,i){const e=await t("plugin:store|load",{path:a,options:i});return new s(e)}static async get(a){return await t("plugin:store|get_store",{path:a}).then(i=>i?new s(i):null)}async set(a,i){await t("plugin:store|set",{rid:this.rid,key:a,value:i})}async get(a){const[i,e]=await t("plugin:store|get",{rid:this.rid,key:a});return e?i:void 0}async has(a){return await t("plugin:store|has",{rid:this.rid,key:a})}async delete(a){return await t("plugin:store|delete",{rid:this.rid,key:a})}async clear(){await t("plugin:store|clear",{rid:this.rid})}async reset(){await t("plugin:store|reset",{rid:this.rid})}async keys(){return await t("plugin:store|keys",{rid:this.rid})}async values(){return await t("plugin:store|values",{rid:this.rid})}async entries(){return await t("plugin:store|entries",{rid:this.rid})}async length(){return await t("plugin:store|length",{rid:this.rid})}async reload(a){await t("plugin:store|reload",{rid:this.rid,...a})}async save(){await t("plugin:store|save",{rid:this.rid})}async onKeyChange(a,i){return await d("store://change",e=>{e.payload.resourceId===this.rid&&e.payload.key===a&&i(e.payload.exists?e.payload.value:void 0)})}async onChange(a){return await d("store://change",i=>{i.payload.resourceId===this.rid&&a(i.payload.key,i.payload.exists?i.payload.value:void 0)})}}export{s as Store,p as load};
